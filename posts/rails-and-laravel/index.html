<!DOCTYPE html>
<html lang="en">
    <head prefix="og: https://ogp.me/ns#">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="light dark">
  
  <title>Viiisit [Ruby on Rails, Laravel] - 起步走! - Viiisit!</title>
  
    <link rel="shortcut icon" href="/theme-img/viiilogo.png">
  
  
    <link rel='manifest' href='/manifest.json'>
  

  
  
  
  <meta property="og:title" content="Viiisit [Ruby on Rails, Laravel] - 起步走! - Viiisit!" />
  
  <meta property="og:type" content="article" />
  
  <meta property="og:url" content="https://viiisit.com/posts/rails-and-laravel/index.html" />
  
  <meta property="og:image" content="/favicon.png" />
  
  <meta property="og:article:published_time" content="2024-03-19T07:00:00.000Z" />
  
  <meta property="og:article:author" content="Zinni Chang" />
  
  

  
<link rel="stylesheet" href="/css/var.css">

  
<link rel="stylesheet" href="/css/main.css">

  
<link rel="stylesheet" href="/css/typography.css">

  
<link rel="stylesheet" href="/css/code-highlighting.css">

  
<link rel="stylesheet" href="/css/components.css">

  
<link rel="stylesheet" href="/css/nav.css">

  
<link rel="stylesheet" href="/css/paginator.css">

  
<link rel="stylesheet" href="/css/footer.css">

  
<link rel="stylesheet" href="/css/post-list.css">

  
  
<link rel="stylesheet" href="/css/rainbow-banner.css">

  
  
  
<link rel="stylesheet" href="/css/toc.css">

  
  
  
  
  
<link rel="stylesheet" href="/css/post.css">

  
  
  
  
  

  
<meta name="generator" content="Hexo 6.3.0"></head>
    <body
        data-color-scheme="auto"
        data-uppercase-categories="true"
        
        data-rainbow-banner="true"
        data-rainbow-banner-shown="auto"
        data-rainbow-banner-month="6"
        data-rainbow-banner-colors="#e50000,#ff8d00,#ffee00,#008121,#004cff,#760188"
        
        data-config-root="/"
        
        data-toc="true"
        data-toc-max-depth="2"
        
        
    >
        <nav id="theme-nav">
    <div class="inner">
        <a class="title" href="/">Viiisit!</a>
        <div class="nav-arrow"></div>
        <div class="nav-items">
            <a class="nav-item nav-item-home" href="/">Home</a>
            
            
            <a class="nav-item" href="/archives">Archives</a>
            
            
            
            <a class="nav-item" target="_blank" rel="noopener" href="https://github.com/viiining">Projects</a>
            
            
            
            <a class="nav-item" href="/about">About me</a>
            
            
            
            <a class="nav-item nav-item-github nav-item-icon" href="https://github.com/viiining" target="_blank" aria-label="GitHub">&nbsp;</a>
            
            
            
            <a class="nav-item nav-item-discord nav-item-icon" href="https://discordapp.com/users/1113786568956715118" target="_blank" aria-label="Discord">&nbsp;</a>
            
            
        </div>
    </div>
</nav>
        
<article class="post">
    <div class="meta">
        
        <div class="categories text-uppercase">
        
            <a href="/categories/keep-learning/">keep learning</a>
        
        </div>
        

        
        <div class="date" id="date">
            <span>March</span>
            <span>19,</span>
            <span>2024</span>
        </div>
        

        <h1 class="title">Viiisit [Ruby on Rails, Laravel] - 起步走!</h1>
    </div>

    <div class="about">
        
        <p class="tags">
            
            <i class="icon"></i>
            <a href="/tags/laravel/" class="tag">#laravel</a><a href="/tags/ruby-on-rails/" class="tag">#ruby on rails</a>
        </p>
        
    </div>

    <div class="content">
        <h2 id="前情提要"><a href="#前情提要" class="headerlink" title="前情提要"></a>前情提要</h2><p>半年前，我在 Astrocamp 學習三個月的 Rails 開發，<br>結束後，誤打誤撞進入了以 Laravel 來開發的工作！<br>一開始的確有點擔心自己會不會吃不消，但慢慢發現這兩者在開發上有著很相似的味道，<br>慢慢記錄使用上的小小心得，或許之後都能用得上也說不定！</p>
<hr>
<h2 id="概念理解"><a href="#概念理解" class="headerlink" title="概念理解"></a>概念理解</h2><p>在開發框架中，以下幾個名詞都是很重要的概念：</p>
<ul>
<li><p><strong>MVC（Model-View-Controller）</strong></p>
<blockquote>
<p>MVC 是一種常見的軟體架構模式，將應用程式分為三個核心部分：<br><strong>模型（Model）、視圖（View）和控制器（Controller）</strong></p>
</blockquote>
<p> 在 Rails 和 Laravel 中，這種架構都被廣泛採用。</p>
<ul>
<li>模型（Model）負責處理應用程式的資料邏輯，</li>
<li>視圖（View）負責呈現使用者介面，</li>
<li>控制器（Controller）則是連接模型和視圖，並處理用戶的輸入。</li>
</ul>
<p> 透過 MVC 架構，開發者可以更清晰地組織和管理程式碼，實現代碼的重用性和可維護性。</p>
</li>
<li><p><strong>RESTful 設計</strong></p>
<blockquote>
<p>RESTful 是一種設計風格，用於建立有效的、可擴展的 Web API。</p>
</blockquote>
<p> 基於 REST（Representational State Transfer）原則，強調使用統一資源標識符（Uniform Resource Identifiers，URI）來操縱資源。<br> 透過 RESTful 設計，開發者可以定義清晰的路由結構、合理的 HTTP 方法使用和良好的資源命名，以實現易於維護和擴展的 API。</p>
<p> 比方說，假設你在經營一家電子商務網站，希望用戶能夠通過 API 存取你的產品資訊。<br> 使用 RESTful 設計，可以通過像 <code>/products</code> 這樣的 URI 來獲取所有產品資訊，配上合適的 HTTP 方法（例如 GET、POST、PUT、DELETE）來執行獲取、新增、更新或刪除產品。</p>
</li>
<li><p><strong>Migration</strong></p>
<blockquote>
<p>Migration 是一種用於管理資料庫版本控制的機制，通過程式化的方式定義和更新資料庫結構。</p>
</blockquote>
<p> 在 Rails 和 Laravel 中，Migration 具有相似的概念和實現方式。開發者可以通過撰寫 Migration 檔案來定義資料庫結構的變化，然後使用框架提供的指令來執行 Migration，實現資料庫結構的異動。</p>
</li>
</ul>
<hr>
<h2 id="Ruby-on-Rails"><a href="#Ruby-on-Rails" class="headerlink" title="Ruby on Rails"></a>Ruby on Rails</h2><p><strong>語言</strong>：Ruby &#x2F; <strong>作者</strong>： David Heinemeier Hansson<br><strong>官方文件</strong>：<a target="_blank" rel="noopener" href="https://guides.rubyonrails.org/">Rails Guides</a></p>
<ul>
<li><p><strong>慣例優於設定（Convention over Configuration, CoC）</strong><br>Rails 強調慣例優於設定原則，提供預設的設定和工作流程，使得開發更加快速和一致。</p>
<blockquote>
<p>Model 使用<strong>單數形式</strong>，例如 <code>Article</code> 代表一個文章模型；<br>Controller 使用<strong>複數形式，並以”Controller”結尾</strong>，例如 <code>ArticlesController</code> 。</p>
</blockquote>
</li>
<li><p><strong>不要做重複的事（Don’t Repeat Yourself, DRY）</strong><br>把重複的部份抓出來，整理為一個方法、類別或模組。</p>
</li>
<li><p><strong>指令介面</strong></p>
<blockquote>
<p>使用 <strong>rails command line</strong> 來執行各種開發。</p>
</blockquote>
<p> 可以在終端機透過 <code>rails --help</code>，就可以看見所有可以用的 rails 指令：<br> <img src="/../assets/images/rails_help.png" alt="rails --help"></p>
</li>
<li><p><strong>套件與套件管理</strong></p>
<blockquote>
<p>使用 Bundler 作為套件管理器，可以通過 Bundler 輕鬆管理 Gem 依賴關係。</p>
</blockquote>
<p> Gem（是一個可以下載並安裝的 package。可以在開發上新增額外的功能。）<br> Ex: <a target="_blank" rel="noopener" href="https://github.com/heartcombo/devise">Devise</a> 提供完整的用戶註冊、登錄、忘記密碼等功能，直接快速完成會員系統。</p>
<h4 id="bundle-install"><a href="#bundle-install" class="headerlink" title="bundle install"></a><code>bundle install</code></h4><p> 用於安裝所有必需的 gem 套件，包括指定版本的 gem 和其相依性。Bundler 會根據 <code>Gemfile</code> 文件中定義的依賴關係來安裝套件。<br> 安裝的 gem 預設會放在 <code>vendor/bundle</code> 目錄下，並生成 <code>Gemfile.lock</code> 文件以確保後續安裝的 gem 版本與當前一致。</p>
<h4 id="bundle-update"><a href="#bundle-update" class="headerlink" title="bundle update"></a><code>bundle update</code></h4><p> 如果要新增套件或更新，只需在 <code>Gemfile</code> 中添加套件的名稱和版本約束，並使用 <code>bundle update</code>。</p>
</li>
<li><p><strong>Object–relational mapping (ORM) 物件關聯映射</strong></p>
<blockquote>
<p>在 Rails 名為 <strong>Active Record</strong> 提供方便的資料庫操作方法，<br>使用 Ruby 與資料庫交互更加簡單和直觀。</p>
</blockquote>
</li>
</ul>
<h2 id="實際以-code-來看-Active-Record"><a href="#實際以-code-來看-Active-Record" class="headerlink" title="實際以 code 來看 Active Record"></a>實際以 code 來看 Active Record</h2><p>建立一個 User 的資料表，其中包含 id、name 和 email 欄位，<br>並使用 Active Record 對 User 資料進行操作：</p>
<ul>
<li><p>在終端機使用 rails 指令，建立 <strong>User Model</strong><br><code>rails generate model User name:string email:string</code><br>可以簡寫成： <code>rails g model User name email</code> （*如果型別是 <code>string</code> 可以省略不寫）</p>
<blockquote>
<p>id 是由 Rails 自動生成的欄位用於唯一識別每條記錄，也就是主鍵（primary key）。這個值是自動增長的，也就是每次新增記錄時都會自動增加。</p>
</blockquote>
<p> 指令輸入之後會生成與 User 相關的所有必要檔案，<br> 包括 migration, model, test：<br> <img src="/../assets/images/rails_g_user.png" alt="rails g Model User"></p>
<p> <strong>db&#x2F;migrate&#x2F;20240319034136_create_users.rb</strong></p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">class CreateUsers &lt; ActiveRecord::Migration[7.0]</span><br><span class="line">   def change</span><br><span class="line">      create_table :users do |t|</span><br><span class="line">         t.string :name</span><br><span class="line">         t.string :email</span><br><span class="line"></span><br><span class="line">         t.timestamps</span><br><span class="line">      end</span><br><span class="line">   end</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<p> <strong>app&#x2F;models&#x2F;user.rb</strong></p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">class User &lt; ApplicationRecord</span><br><span class="line">end</span><br></pre></td></tr></table></figure></li>
</ul>
<p>在繼續之前記得要跑一次，<code>rails db:migrate</code>，<br>這會執行所有尚未運行的資料庫遷移，並確保資料庫結構是最新的。<br><img src="/../assets/images/rails_db_migrate.png" alt="rails db:migrate"></p>
<blockquote>
<p>如何確認是否有沒有運行的 migration？<br>   <code>rails db:migrate:status</code></p>
</blockquote>
   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Status   Migration ID    Migration Name</span><br><span class="line">--------------------------------------------------</span><br><span class="line">   up     20240319034136  Create <span class="built_in">users</span></span><br><span class="line">   down   20240319073529  Drop <span class="built_in">users</span></span><br></pre></td></tr></table></figure>
<p>   *狀態是 “up”，表示已執行，”down”，表示尚未被執行。</p>
<hr>
<p><strong>接下來，以 <code>rails console</code> 也就是進入 Rails 的控制台，<br>在裡頭我們可以直接操作資料庫並使用 Active Record 來進行一系列查詢、新增、修改、刪除。</strong></p>
<h2 id="rails-console"><a href="#rails-console" class="headerlink" title="rails console"></a>rails console</h2><p>正式進入 rails console 裡：<br><img src="/../assets/images/rails_console.png" alt="rails console"></p>
<p>一但進入，就可以使用 Active Record 來與資料庫進行交互，以下為基本的操作方式：</p>
<h6 id="建立一個新的-user"><a href="#建立一個新的-user" class="headerlink" title="建立一個新的 user"></a>建立一個新的 user</h6><p>   <code>User.create(name: &quot;Zinni Chang&quot;, email: &quot;zinni@example.com&quot;)</code><br>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">:001 &gt; User.create(name: <span class="string">&quot;Zinni Chang&quot;</span>, email: <span class="string">&quot;zinni@example.com&quot;</span>)</span><br><span class="line">TRANSACTION (0.0ms)  begin transaction</span><br><span class="line">User Create (0.5ms)  INSERT INTO <span class="string">&quot;users&quot;</span> (<span class="string">&quot;name&quot;</span>, <span class="string">&quot;email&quot;</span>, <span class="string">&quot;created_at&quot;</span>, <span class="string">&quot;updated_at&quot;</span>) VALUES (?, ?, ?, ?)</span><br><span class="line">[[<span class="string">&quot;name&quot;</span>, <span class="string">&quot;Zinni Chang&quot;</span>], [<span class="string">&quot;email&quot;</span>, <span class="string">&quot;zinni@example.com&quot;</span>],</span><br><span class="line">[<span class="string">&quot;created_at&quot;</span>, <span class="string">&quot;2024-03-19 12:49:29.883029&quot;</span>], [<span class="string">&quot;updated_at&quot;</span>, <span class="string">&quot;2024-03-19 12:49:29.883029&quot;</span>]]</span><br><span class="line">TRANSACTION (0.8ms)  commit transaction</span><br><span class="line">=&gt; </span><br><span class="line"><span class="comment">#&lt;User:0x00000001097b2258</span></span><br><span class="line">... </span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>Rails 會啟動一個 TRANSACTION，並將我們的 create 動作放入這個 TRANSACTION 中，接著，Rails 執行 INSERT SQL 語句，將新的 user 插入到 users 資料表中，並將名稱、電子郵件地址以及建立時間和更新時間寫入資料庫。最後，TRANSACTION 成功！（也就是 commit transaction）。</p>
</blockquote>
<hr>
<h6 id="查詢-user"><a href="#查詢-user" class="headerlink" title="查詢 user"></a>查詢 user</h6><ul>
<li><p>在 users 資料表的所有 user</p>
<p> <code>User.all</code></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> :002 &gt; User.all</span><br><span class="line">  User Load (16.8ms)  SELECT <span class="string">&quot;users&quot;</span>.* FROM <span class="string">&quot;users&quot;</span></span><br><span class="line"> =&gt; </span><br><span class="line">[<span class="comment">#&lt;User:0x000000010a57b6a0</span></span><br><span class="line">  <span class="built_in">id</span>: 1,</span><br><span class="line">  name: <span class="string">&quot;Zinni Chang&quot;</span>,</span><br><span class="line">  email: <span class="string">&quot;zinni@example.com&quot;</span>,</span><br><span class="line">  created_at: Fri, 19 Mar 2024 12:49:29.883029000 UTC +00:00,</span><br><span class="line">  updated_at: Fri, 19 Mar 2024 12:49:29.883029000 UTC +00:00&gt;]</span><br></pre></td></tr></table></figure>
</li>
<li><p>查詢特定的 user</p>
<ul>
<li><code>find(id)</code> 根據主鍵 (id) 來查找單一記錄。</li>
</ul>
<p> <code>User.find(1)</code></p>
<pre><code><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">:003 &gt; User.find(1)</span><br><span class="line">User Load (4.8ms)  SELECT <span class="string">&quot;users&quot;</span>.* FROM <span class="string">&quot;users&quot;</span> WHERE <span class="string">&quot;users&quot;</span>.<span class="string">&quot;id&quot;</span> = ? LIMIT ?  [[<span class="string">&quot;id&quot;</span>, 1], [<span class="string">&quot;LIMIT&quot;</span>, 1]]</span><br><span class="line">=&gt; </span><br><span class="line"><span class="comment">#&lt;User:0x000000010a5758e0</span></span><br><span class="line"><span class="built_in">id</span>: 1,</span><br><span class="line">name: <span class="string">&quot;Zinni Chang&quot;</span>,</span><br><span class="line">email: <span class="string">&quot;zinni@example.com&quot;</span>,</span><br><span class="line">created_at: Fri, 19 Mar 2024 12:49:29.883029000 UTC +00:00,</span><br><span class="line">updated_at: Fri, 19 Mar 2024 12:49:29.883029000 UTC +00:00&gt;</span><br></pre></td></tr></table></figure>
</code></pre>
<ul>
<li><code>find_by()</code> 根據指定的條件查找第一個匹配的記錄，這裡用欄位是 name 來尋找</li>
</ul>
<p> <code>User.find_by(name: &quot;Zinni Chang&quot;)</code></p>
<pre><code><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">:004 &gt; User.find_by(name: <span class="string">&quot;Zinni Chang&quot;</span>)</span><br><span class="line">User Load (13.5ms)  SELECT <span class="string">&quot;users&quot;</span>.* FROM <span class="string">&quot;users&quot;</span> WHERE <span class="string">&quot;users&quot;</span>.<span class="string">&quot;name&quot;</span> = ? LIMIT ?  [[<span class="string">&quot;name&quot;</span>, <span class="string">&quot;Zinni Chang&quot;</span>], [<span class="string">&quot;LIMIT&quot;</span>, 1]]</span><br><span class="line">=&gt; </span><br><span class="line"><span class="comment">#&lt;User:0x000000010a3b7e40</span></span><br><span class="line"><span class="built_in">id</span>: 1,</span><br><span class="line">name: <span class="string">&quot;Zinni Chang&quot;</span>,</span><br><span class="line">email: <span class="string">&quot;zinni@example.com&quot;</span>,</span><br><span class="line">created_at: Fri, 19 Mar 2024 12:49:29.883029000 UTC +00:00,</span><br><span class="line">updated_at: Fri, 19 Mar 2024 12:49:29.883029000 UTC +00:00&gt; </span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<hr>
<h6 id="更新-user"><a href="#更新-user" class="headerlink" title="更新 user"></a>更新 user</h6><p><code>User.find(id).update(email: &quot;new_zinni@example.com&quot;)</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">:005 &gt; User.find(1).update(email: <span class="string">&quot;new_zinni@example.com&quot;</span>)</span><br><span class="line"> User Load (0.7ms)  SELECT <span class="string">&quot;users&quot;</span>.* FROM <span class="string">&quot;users&quot;</span> WHERE <span class="string">&quot;users&quot;</span>.<span class="string">&quot;id&quot;</span> = ? LIMIT ?  [[<span class="string">&quot;id&quot;</span>, 1], [<span class="string">&quot;LIMIT&quot;</span>, 1]]</span><br><span class="line"> TRANSACTION (0.1ms)  begin transaction</span><br><span class="line"> User Update (0.8ms)  UPDATE <span class="string">&quot;users&quot;</span> SET <span class="string">&quot;email&quot;</span> = ?, <span class="string">&quot;updated_at&quot;</span> = ? WHERE <span class="string">&quot;users&quot;</span>.<span class="string">&quot;id&quot;</span> = ?  [[<span class="string">&quot;email&quot;</span>, <span class="string">&quot;new_zinni@example.com&quot;</span>], [<span class="string">&quot;updated_at&quot;</span>, <span class="string">&quot;2024-03-19 05:36:18.867550&quot;</span>], [<span class="string">&quot;id&quot;</span>, 1]]</span><br><span class="line"> TRANSACTION (0.9ms)  commit transaction</span><br><span class="line">=&gt; <span class="literal">true</span> </span><br></pre></td></tr></table></figure>

<hr>
<h6 id="刪除-user"><a href="#刪除-user" class="headerlink" title="刪除 user"></a>刪除 user</h6><p><code>User.destroy(id)</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"> :006 &gt; User.destroy(1)</span><br><span class="line">  User Load (1.3ms)  SELECT <span class="string">&quot;users&quot;</span>.* FROM <span class="string">&quot;users&quot;</span> WHERE <span class="string">&quot;users&quot;</span>.<span class="string">&quot;id&quot;</span> = ? LIMIT ?  [[<span class="string">&quot;id&quot;</span>, 1], [<span class="string">&quot;LIMIT&quot;</span>, 1]]</span><br><span class="line">  TRANSACTION (0.0ms)  begin transaction</span><br><span class="line">  User Destroy (0.4ms)  DELETE FROM <span class="string">&quot;users&quot;</span> WHERE <span class="string">&quot;users&quot;</span>.<span class="string">&quot;id&quot;</span> = ?  [[<span class="string">&quot;id&quot;</span>, 1]]</span><br><span class="line">  TRANSACTION (1.6ms)  commit transaction</span><br><span class="line"> =&gt; </span><br><span class="line"><span class="comment">#&lt;User:0x0000000113d15510</span></span><br><span class="line"> <span class="built_in">id</span>: 9,</span><br><span class="line"> name: <span class="string">&quot;Zinni Chang&quot;</span>,</span><br><span class="line"> email: <span class="string">&quot;new_zinni@example.com&quot;</span>,</span><br><span class="line"> created_at: Tue, 19 Mar 2024 05:34:41.488452000 UTC +00:00,</span><br><span class="line"> updated_at: Tue, 19 Mar 2024 05:36:18.867550000 UTC +00:00&gt; </span><br></pre></td></tr></table></figure>


<hr>
<h2 id="Laravel"><a href="#Laravel" class="headerlink" title="Laravel"></a>Laravel</h2><p><strong>語言</strong>：PHP &#x2F; <strong>作者</strong>：Taylor Otwell<br><strong>官方文件</strong>：<a target="_blank" rel="noopener" href="https://laravel.com/docs/11.x">Laravel</a></p>
<blockquote>
<p>Laravel 相較 Rails 是一個較為年輕的框架，但他在短時間內迅速崛起，<br>成為 PHP 社群中最受歡迎的框架之一。<br>在看了一些文章與自己使用上，不難發現 Laravel 確實有 Rails 的感覺。</p>
</blockquote>
<ul>
<li><p>與 Rails 不同，Laravel 在開發上沒有強制性的命名規則或預設設置，<br>這使得我們可以更靈活地運用框架，根據自己的需求和喜好進行配置和開發。</p>
</li>
<li><p><strong>指令介面</strong></p>
<blockquote>
<p>使用 <strong>artisan command line</strong> 來執行各種開發。</p>
</blockquote>
<p> 可以在終端機透過 <code>php artisan --help</code>，可以了解 Artisan 全面的說明與可以用的指令：<br> <img src="/../assets/images/php_artisan_help.png" alt="php artisan --help"></p>
<p> 而 php artisan list 提供所有指令列表：<br> <img src="/../assets/images/php_artisan_list_1.png" alt="php_artisan_list_1"><br> <img src="/../assets/images/php_artisan_list_2.png" alt="php_artisan_list_2"><br> <img src="/../assets/images/php_artisan_list_3.png" alt="php_artisan_list_3"><br> <img src="/../assets/images/php_artisan_list_4.png" alt="php_artisan_list_4"><br> <img src="/../assets/images/php_artisan_list_5.png" alt="php_artisan_list_5"></p>
</li>
<li><p><strong>套件與套件管理</strong></p>
<blockquote>
<p>使用 Composer 作為套件管理器，可以通過 Composer 安裝、更新和管理依賴關係和第三方套件。</p>
</blockquote>
<h4 id="composer-install"><a href="#composer-install" class="headerlink" title="composer install"></a><code>composer install</code></h4><p> 這指令使 Composer 將根據 <code>composer.json</code> 中定義的依賴關係，安裝所有必需的套件，包括指定版本的套件和其相依性；<br> Composer 會將所有的套件下載並安裝到 <code>vendor</code> 目錄下，並生成 <code>composer.lock</code> 文件以確保後續安裝的套件版本與當前一致。</p>
<h4 id="composer-update"><a href="#composer-update" class="headerlink" title="composer update"></a><code>composer update</code></h4><p> 如果要新增套件或更新，只需在 <code>composer.json</code> 中添加套件的名稱和版本約束，並使用 <code>composer update</code>。</p>
</li>
<li><p><strong>Object–relational mapping (ORM) 物件關聯映射</strong></p>
<blockquote>
<p>在 Laravel 名為 <strong>Eloquent</strong> 提供方便的資料庫操作方法，<br>使用 PHP 與資料庫交互更加簡單和直觀。</p>
</blockquote>
</li>
</ul>
<h2 id="實際以-code-來看-Eloquent"><a href="#實際以-code-來看-Eloquent" class="headerlink" title="實際以 code 來看 Eloquent"></a>實際以 code 來看 Eloquent</h2><p>建立一個 User 的資料表，其中包含 id、name 和 email 欄位，<br>並使用 Eloquent 對 User 資料進行操作：</p>
<ul>
<li><p>在終端機使用 artisan 指令，建立 <strong>User Model</strong><br> <code>php artisan make:model User -m</code> 這指令會產生 Model 與 migration</p>
<p> <strong>app&#x2F;Models&#x2F;User.php</strong></p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Models</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Model</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Model</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 資料表名稱</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@var</span> string</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="keyword">protected</span> <span class="variable">$table</span> = <span class="string">&#x27;users&#x27;</span>;</span><br><span class="line"></span><br><span class="line">   <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 可以賦值的欄位</span></span><br><span class="line"><span class="comment">   *</span></span><br><span class="line"><span class="comment">   * <span class="doctag">@var</span> array</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">   <span class="keyword">protected</span> <span class="variable">$fillable</span> = [</span><br><span class="line">      <span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;email&#x27;</span>,</span><br><span class="line">   ];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> <strong>database&#x2F;migrations&#x2F;2024_03_19_163819_create_users_table.php</strong></p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Migrations</span>\<span class="title">Migration</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Schema</span>\<span class="title">Blueprint</span>;</span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Support</span>\<span class="title">Facades</span>\<span class="title">Schema</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CreateUsersTable</span> <span class="keyword">extends</span> <span class="title">Migration</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">up</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="title class_">Schema</span>::<span class="title function_ invoke__">create</span>(<span class="string">&#x27;users&#x27;</span>, function (Blueprint <span class="variable">$table</span>) &#123;</span><br><span class="line">            <span class="variable">$table</span>-&gt;<span class="title function_ invoke__">id</span>();</span><br><span class="line">            <span class="variable">$table</span>-&gt;<span class="keyword">string</span>(<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line">            <span class="variable">$table</span>-&gt;<span class="keyword">string</span>(<span class="string">&#x27;email&#x27;</span>)-&gt;<span class="title function_ invoke__">unique</span>();</span><br><span class="line">            <span class="variable">$table</span>-&gt;<span class="title function_ invoke__">timestamps</span>();</span><br><span class="line">      &#125;);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">down</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="title class_">Schema</span>::<span class="title function_ invoke__">dropIfExists</span>(<span class="string">&#x27;users&#x27;</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>接下來，以 <code>php artisan tinker</code>，<br>在裡頭我們可以直接操作資料庫並使用 Eloquent 來進行一系列查詢、新增、修改、刪除。</strong></p>
<p>在這之前記得要跑一次，<code>php artisan migrate</code>，<br>這會執行所有尚未運行的資料庫遷移，並確保資料庫結構是最新的。</p>
<blockquote>
<p>如何確認是否有沒有運行的 migration？<br>   <code>php artisan migrate:status</code><br>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+------+-----------------------------------------------------------+-------+</span><br><span class="line">| Ran? | Migration                                                 | Batch |</span><br><span class="line">+------+-----------------------------------------------------------+-------+</span><br><span class="line">| Yes  | 2024_03_10_000000_create_users_table                      | 1     |</span><br><span class="line">| Yes  | 2024_03_12_000000_create_posts_table                      | 1     |</span><br><span class="line">| No   | 2024_03_19_000000_add_column_to_users_table               |       |</span><br><span class="line">+------+-----------------------------------------------------------+-------+</span><br></pre></td></tr></table></figure><br>   *狀態是 “Yes”，表示已執行，”No”，表示尚未被執行。</p>
</blockquote>
<h2 id="php-artisan-tinker"><a href="#php-artisan-tinker" class="headerlink" title="php artisan tinker"></a>php artisan tinker</h2><p>正式進入 Tinker 裡：<br><img src="/../assets/images/php_artisan_tinker.png" alt="php artisan tinker"></p>
<p>一但進入，就可以使用 Eloquent 來與資料庫進行交互，以下為基本的操作方式：</p>
<h6 id="建立一個新的-user-1"><a href="#建立一個新的-user-1" class="headerlink" title="建立一個新的 user"></a>建立一個新的 user</h6><p>   <code>App\Models\User::create([&#39;name&#39; =&gt; &#39;Zinni Chang&#39;, &#39;email&#39; =&gt; &#39;zinni@example.com&#39;]);</code></p>
<p>   也可以簡寫：<br>   <code>User::create([&#39;name&#39; =&gt; &#39;Zinni Chang&#39;, &#39;email&#39; =&gt; &#39;zinni@example.com&#39;]);</code><br>   <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&gt; App\Models\User::create([<span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;Zinni Chang&#x27;</span>, <span class="string">&#x27;email&#x27;</span> =&gt; <span class="string">&#x27;zinni@example.com&#x27;</span>]);</span><br><span class="line">= App\Models\User &#123;<span class="comment">#6960</span></span><br><span class="line">   name: <span class="string">&quot;Zinni Chang&quot;</span>,</span><br><span class="line">   email: <span class="string">&quot;zinni@example.com&quot;</span>,</span><br><span class="line">   updated_at: <span class="string">&quot;2024-03-19 16:51:28&quot;</span>,</span><br><span class="line">   created_at: <span class="string">&quot;2024-03-19 16:51:28&quot;</span>,</span><br><span class="line">   <span class="built_in">id</span>: 1,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h6 id="查詢-user-1"><a href="#查詢-user-1" class="headerlink" title="查詢 user"></a>查詢 user</h6><ul>
<li><p>在 users 資料表的所有 user</p>
<p> <code>User::all();</code></p>
 <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt; User::all();</span><br><span class="line">= Illuminate\Database\Eloquent\Collection &#123;<span class="comment">#7288</span></span><br><span class="line">   all: [</span><br><span class="line">      App\Models\User &#123;<span class="comment">#7287</span></span><br><span class="line">      <span class="built_in">id</span>: 1,</span><br><span class="line">      name: <span class="string">&quot;Zinni Chang&quot;</span>,</span><br><span class="line">      email: <span class="string">&quot;zinni@example.com&quot;</span>,</span><br><span class="line">      email_verified_at: null,</span><br><span class="line">      created_at: <span class="string">&quot;2024-03-19 16:51:28&quot;</span>,</span><br><span class="line">      updated_at: <span class="string">&quot;2024-03-19 16:51:28&quot;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">   ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>查詢特定的 user</p>
<ul>
<li><code>find(id)</code> 根據主鍵 (id) 來查找單一記錄。</li>
</ul>
<p> <code>User::find(1);</code></p>
<pre><code><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; User::find(1);</span><br><span class="line">= App\Models\User &#123;<span class="comment">#7216</span></span><br><span class="line">    <span class="built_in">id</span>: 1,</span><br><span class="line">    name: <span class="string">&quot;Zinni Chang&quot;</span>,</span><br><span class="line">    email: <span class="string">&quot;zinni@example.com&quot;</span>,</span><br><span class="line">    email_verified_at: null,</span><br><span class="line">    created_at: <span class="string">&quot;2024-03-19 16:51:28&quot;</span>,</span><br><span class="line">    updated_at: <span class="string">&quot;2024-03-19 16:51:28&quot;</span>,</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
</code></pre>
<ul>
<li><code>where()</code> 根據指定的條件查找第一個匹配的記錄，這裡用欄位是 name 來尋找</li>
</ul>
<p> <code>User::where(&#39;name&#39;, &#39;Zinni Chang&#39;)-&gt;first();</code></p>
<pre><code><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt; User::<span class="built_in">where</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;Zinni Chang&#x27;</span>)-&gt;first();</span><br><span class="line">= App\Models\User &#123;<span class="comment">#7070</span></span><br><span class="line">   <span class="built_in">id</span>: 1,</span><br><span class="line">   name: <span class="string">&quot;Zinni Chang&quot;</span>,</span><br><span class="line">   email: <span class="string">&quot;zinni@example.com&quot;</span>,</span><br><span class="line">   email_verified_at: null,</span><br><span class="line">   created_at: <span class="string">&quot;2024-03-19 16:51:28&quot;</span>,</span><br><span class="line">   updated_at: <span class="string">&quot;2024-03-19 16:51:28&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</code></pre>
</li>
</ul>
<hr>
<h6 id="更新-user-1"><a href="#更新-user-1" class="headerlink" title="更新 user"></a>更新 user</h6><p><code>User::find(1)-&gt;update([&#39;email&#39; =&gt; &#39;new_zinni@example.com&#39;])</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt; User::find(1)-&gt;update([<span class="string">&#x27;email&#x27;</span> =&gt; <span class="string">&#x27;new_zinni@example.com&#x27;</span>])</span><br><span class="line">= <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">&gt; User::find(1)</span><br><span class="line">= App\Models\User &#123;<span class="comment">#7198</span></span><br><span class="line">    <span class="built_in">id</span>: 1,</span><br><span class="line">    name: <span class="string">&quot;Zinni Chang&quot;</span>,</span><br><span class="line">    email: <span class="string">&quot;new_zinni@example.com&quot;</span>,</span><br><span class="line">    email_verified_at: null,</span><br><span class="line">    created_at: <span class="string">&quot;2024-03-19 05:41:54&quot;</span>,</span><br><span class="line">    updated_at: <span class="string">&quot;2024-03-19 05:42:23&quot;</span>,</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

<hr>
<h6 id="刪除-user-1"><a href="#刪除-user-1" class="headerlink" title="刪除 user"></a>刪除 user</h6><p><code>User::find(3)-&gt;delete()</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt; User::find(3)-&gt;delete()</span><br><span class="line">= <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">&gt; User::find(3)</span><br><span class="line">= null</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="資料庫關聯"><a href="#資料庫關聯" class="headerlink" title="資料庫關聯"></a>資料庫關聯</h2><blockquote>
<p>資料庫關聯是指資料庫中不同表格之間的關聯。常見的關聯包括一對一、一對多和多對多。</p>
</blockquote>
<p>   在 Rails 和 Laravel，都可以通過定義模型之間的關係來實現資料庫關聯，也就可以輕鬆地在應用程式中操作相關聯的資料，並利用框架提供的方法來簡化資料庫查詢和操作。</p>
<ul>
<li><p>在 Rails 中，假設我們有兩個模型：<code>User</code> 和 <code>Post</code>，<br> 他們之間是一對多的關係，也就是一個使用者可以擁有多篇文章。</p>
<p> 可以這樣定義：</p>
 <figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># app/models/user.rb</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">User</span> &lt; <span class="title class_ inherited__">ApplicationRecord</span></span><br><span class="line">   has_many <span class="symbol">:posts</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># app/models/post.rb</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Post</span> &lt; <span class="title class_ inherited__">ApplicationRecord</span></span><br><span class="line">   belongs_to <span class="symbol">:user</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>在 Laravel 中，也可以用類似的方式來定義這個關係。<br> 假設同樣有 <code>User</code> 和 <code>Post</code> 兩個模型，</p>
<p> 可以這樣寫：</p>
 <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// app/Models/User.php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Models</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Model</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Model</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">posts</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">hasMany</span>(<span class="title class_">Post</span>::<span class="variable language_">class</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// app/Models/Post.php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title class_">App</span>\<span class="title class_">Models</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">use</span> <span class="title">Illuminate</span>\<span class="title">Database</span>\<span class="title">Eloquent</span>\<span class="title">Model</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Post</span> <span class="keyword">extends</span> <span class="title">Model</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">user</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">belongsTo</span>(<span class="title class_">User</span>::<span class="variable language_">class</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<blockquote>
<p>這樣一來，在實際應用中，我們可以使用這些關係方法來輕鬆地查詢和操作相關聯的資料，<br>而不需要手動撰寫複雜的 SQL 查詢。</p>
</blockquote>
<p>在 Rails 中：</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 建立一個使用者</span></span><br><span class="line">user = <span class="title class_">User</span>.create(<span class="symbol">name:</span> <span class="string">&quot;Zinni Chang&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 為該使用者建立一篇文章</span></span><br><span class="line">user.posts.create(<span class="symbol">title:</span> <span class="string">&quot;Laravel 新手村初登場&quot;</span>, <span class="symbol">content:</span> <span class="string">&quot;RoR 與 Laravel&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查詢該使用者的所有文章</span></span><br><span class="line">user.posts.each <span class="keyword">do</span> |<span class="params">post</span>|</span><br><span class="line">  puts <span class="string">&quot;Title: <span class="subst">#&#123;post.title&#125;</span>, Content: <span class="subst">#&#123;post.content&#125;</span>&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>在 Laravel 中：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 建立一個使用者</span></span><br><span class="line"><span class="variable">$user</span> = <span class="title class_">User</span>::<span class="title function_ invoke__">create</span>([<span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;Zinni Chang&#x27;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 為該使用者建立一篇文章</span></span><br><span class="line"><span class="variable">$post</span> = <span class="variable">$user</span>-&gt;<span class="title function_ invoke__">posts</span>()-&gt;<span class="title function_ invoke__">create</span>([<span class="string">&#x27;title&#x27;</span> =&gt; <span class="string">&#x27;Laravel 新手村初登場&#x27;</span>, <span class="string">&#x27;content&#x27;</span> =&gt; <span class="string">&#x27;RoR 與 Laravel&#x27;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查詢該使用者的所有文章</span></span><br><span class="line"><span class="keyword">foreach</span> (<span class="variable">$user</span>-&gt;posts <span class="keyword">as</span> <span class="variable">$post</span>) &#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;Title: &quot;</span> . <span class="variable">$post</span>-&gt;title . <span class="string">&quot;, Content: &quot;</span> . <span class="variable">$post</span>-&gt;content . <span class="string">&quot;\n&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="Active-Record-回調-與-Eloquent-事件"><a href="#Active-Record-回調-與-Eloquent-事件" class="headerlink" title="Active Record 回調 與 Eloquent 事件"></a>Active Record 回調 與 Eloquent 事件</h2><p>執行 Eloquent 事件（Laravel）和 Active Record 回調（Rails）都是在操作資料庫時執行額外邏輯的機制。<br>這兩種機制都允許在模型生命週期中的特定事件觸發時執行自定義的程式碼。</p>
<p><img src="/../assets/images/rails_and_laravel_table.png" alt="rails and laravel table"></p>
<h3 id="差異"><a href="#差異" class="headerlink" title="差異"></a>差異</h3><ul>
<li><p><strong>細分程度</strong>：</p>
<ul>
<li>Rails 提供了更細緻的回調級別，例如驗證前後、保存前後、建立前後、更新前後、刪除前後，這使得可以在更多細節層面上處理邏輯。</li>
<li>Laravel 的 Eloquent 事件相對較簡單，僅提供了模型被建立、更新或刪除的基本事件。</li>
</ul>
</li>
<li><p><strong>用法差異</strong>：</p>
<ul>
<li>Rails 的 Active Record 回調是在模型類中定義的方法，這些方法會在模型的特定生命周期事件發生時自動被調用。<br> 例如，在創建模型、更新模型或刪除模型時，可以定義相應的回調方法。</li>
<li>Laravel 的 Eloquent 事件需要通過註冊監聽器（Listener）來執行額外的邏輯，例如發送郵件。</li>
</ul>
</li>
</ul>
<p>透過註冊回調方法，您可以在記錄的不同階段執行自定義的邏輯，從而擴展和定制模型的行為。</p>
<blockquote>
<p>無論是在 Laravel 中的 Eloquent 事件還是在 Rails 中的 Active Record 回調，都提供了在模型生命週期中執行額外程式碼的方法。這些機制可以在資料庫操作的不同階段執行自定義邏輯，從而實現更高級別的業務邏輯或應用程式行為。</p>
</blockquote>
<hr>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>在 Ruby on Rails 中，許多功能和工作流程已經預先定義好了，例如路由、資料庫映射、文件結構等，開發者只需遵循這些約定就可以開發。<br>這種自動化配置和約定優於配置的方法有助於提高開發者的生產力，使得開發過程更加流暢。</p>
<p>相比之下，Laravel 並沒有像 Ruby on Rails 那樣嚴格遵循約定優於配置的原則。<br>雖然 Laravel 提供許多方便的功能和工具，開發者需要更多地進行手動配置來定義應用程序的行為和結構。<br>例如，Laravel 的路由、資料庫映射和文件結構沒有像 Rails 那樣嚴格的命名和結構約定，開發者可以自由地根據自己的偏好和需求進行設置和組織。<br>因此，可以說 Laravel 更加靈活。</p>
<p>Rails 和 Laravel 都是不錯的 Web 開發框架，具有各自的特點和優勢。<br>選擇使用哪個框架取決於項目需求、開發者技能和偏好等因素。</p>

    </div>
<!-- 
    
    <div class="about">
        <h1>About this Post</h1>
        <div class="details">
            <p>This post is written by Zinni Chang, licensed under <a href="undefined">undefined</a>.</p>
        </div>
        
        <p class="tags">
            
            <i class="icon"></i>
            <a href="/tags/laravel/" class="tag">#laravel</a><a href="/tags/ruby-on-rails/" class="tag">#ruby on rails</a>
        </p>
        
    </div>
     -->

    <div class="divider"></div>

    <div class="container post-prev-next">
        <a class="next"></a>
        
        <a href="/posts/linux-macos-commands/" class="prev">
            <div>
                <div class="text">
                    <p class="label">Previous</p>
                    <h3 class="title">Viiisit [Linux &amp; MacOS] - Commands!</>
                </div>
            </div>
        </a>
        
    </div>

    
        
        
    
</article>

        <footer>
    <div class="inner">
        <div class="links">
            
            <div class="group">
                <h2 class="title">Viiiisit!</h2>
                
                <a href="/" class="item">Home</a>
                
                <a href="/archives" class="item">Archives</a>
                
                <a href="/tags" class="item">Tags</a>
                
                <a href="/categories" class="item">Categories</a>
                
            </div>
            
            <div class="group">
                <h2 class="title">About Me</h2>
                
                <a target="_blank" rel="noopener" href="https://github.com/viiining" class="item">GitHub</a>
                
                <a target="_blank" rel="noopener" href="https://discordapp.com/users/1113786568956715118" class="item">Discord</a>
                
                <a href="mailto:czinni853@gmail.com" class="item">Email</a>
                
            </div>
            
        </div>
        <span>&copy; 2024 Zinni Chang ∙ Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> </span>
        
        
            <br>
            <div class="color-scheme-toggle" role="radiogroup" id="theme-color-scheme-toggle">
                <label>
                    <input type="radio" value="light">
                    <span>Light</span>
                </label>
                <label>
                    <input type="radio" value="dark">
                    <span>Dark</span>
                </label>
                <label>
                    <input type="radio" value="auto">
                    <span>Auto</span>
                </label>
            </div>
        
    </div>
</footer>


        
<script src="/js/main.js"></script>

        
        
        

        
        <script src="https://unpkg.com/scrollreveal"></script>
        <script>
            window.addEventListener('load', () => {
                ScrollReveal({ delay: 250, reset: true, easing: 'cubic-bezier(0, 0, 0, 1)' })
                ScrollReveal().reveal('.post-list-item .cover-img img')
                ScrollReveal().reveal('.post-list-item, .card, .content p img, .content .block-large img', { distance: '60px', origin: 'bottom', duration: 800 })
            })
        </script>
        
    </body>
</html>